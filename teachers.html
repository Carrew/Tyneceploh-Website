<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Teacher Portal</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; background: #f4f4f4; }
    .hidden { display: none; }
    .error { color: red; }
    table, th, td { border: 1px solid black; border-collapse: collapse; padding: 8px; }
    th { background: #eee; }
    .pass { background-color: lightblue; }
    .fail { background-color: lightcoral; }
    .button { margin: 5px; padding: 5px 10px; }
    input:disabled { background: #ddd; }
  </style>
</head>
<body>
  <div id="login-section">
    <h2>Teacher Login</h2>
    <input type="text" id="teacherName" placeholder="Name"><br><br>
    <input type="text" id="teacherClass" placeholder="Class"><br><br>
    <input type="password" id="teacherPassword" placeholder="Password"><br><br>
    <button onclick="login()">Log In</button>
    <p class="error" id="loginError"></p>
  </div>

  <div id="main-section" class="hidden">
    <h2 id="welcome"></h2>
    <div id="grade-sheet">
      <button onclick="addStudent()">Add Student</button>
      <button onclick="addSubject()">Add Subject</button>
      <button onclick="submitGrades()">Submit</button>
      <button id="approveBtn" onclick="approveGrades()" class="hidden">Approve</button>
      <button id="printBtn" onclick="window.print()" class="hidden">Print</button>
      <br><br>
      <table id="gradeTable">
        <thead>
          <tr>
            <th>Student Name</th>
            <th>Subjects & Grades</th>
            <th>Average</th>
            <th>Status</th>
            <th>Remove</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
    <br>
    <button onclick="logout()">Logout</button>
  </div>

  <script>
    const credentials = [
      { name: "John", class: "Grade 5", password: "pass" },
      { name: "Mr. Doe", class: "Grade 5A", password: "pass123" }
    ];

    function login() {
      const name = document.getElementById("teacherName").value.trim();
      const className = document.getElementById("teacherClass").value.trim();
      const password = document.getElementById("teacherPassword").value;

      const match = credentials.find(
        c => c.name === name && c.class === className && c.password === password
      );

      if (match) {
        document.getElementById("login-section").classList.add("hidden");
        document.getElementById("main-section").classList.remove("hidden");
        document.getElementById("welcome").textContent = `Welcome, ${name} (${className})`;
      } else {
        document.getElementById("loginError").textContent = "Invalid login info. Please try again.";
      }
    }

    function logout() {
      location.reload();
    }

    function addStudent() {
      const name = prompt("Enter student name:");
      if (!name) return;

      const table = document.querySelector("#gradeTable tbody");
      const row = document.createElement("tr");

      const nameCell = document.createElement("td");
      nameCell.textContent = name;

      const subjectsCell = document.createElement("td");
      subjectsCell.classList.add("subjects");

      const averageCell = document.createElement("td");
      averageCell.classList.add("average");

      const statusCell = document.createElement("td");
      statusCell.classList.add("status");

      const removeCell = document.createElement("td");
      const removeBtn = document.createElement("button");
      removeBtn.textContent = "Remove";
      removeBtn.onclick = () => row.remove();
      removeCell.appendChild(removeBtn);

      row.appendChild(nameCell);
      row.appendChild(subjectsCell);
      row.appendChild(averageCell);
      row.appendChild(statusCell);
      row.appendChild(removeCell);

      table.appendChild(row);
    }

    function addSubject() {
      const subject = prompt("Enter subject:");
      if (!subject) return;

      const rows = document.querySelectorAll('#gradeTable tbody tr');
      rows.forEach(row => {
        const subjectWrapper = document.createElement('div');
        subjectWrapper.style.marginBottom = '5px';

        const label = document.createElement('label');
        label.textContent = subject + ': ';
        label.style.marginRight = '5px';

        const gradeInput = document.createElement('input');
        gradeInput.type = 'number';
        gradeInput.min = 0;
        gradeInput.max = 100;
        gradeInput.oninput = () => calculateAverage(row);

        subjectWrapper.appendChild(label);
        subjectWrapper.appendChild(gradeInput);
        row.querySelector('.subjects').appendChild(subjectWrapper);
      });
    }

    function calculateAverage(row) {
      const inputs = row.querySelectorAll('.subjects input');
      let total = 0, count = 0;
      inputs.forEach(input => {
        const val = parseFloat(input.value);
        if (!isNaN(val)) {
          total += val;
          count++;
        }
      });

      const avgCell = row.querySelector('.average');
      const statusCell = row.querySelector('.status');
      if (count === 0) {
        avgCell.textContent = "-";
        statusCell.textContent = "-";
        statusCell.className = "status";
        return;
      }

      const avg = total / count;
      avgCell.textContent = avg.toFixed(2);
      statusCell.textContent = avg >= 70 ? "Pass" : "Fail";
      statusCell.className = avg >= 70 ? "status pass" : "status fail";
    }

    function submitGrades() {
      const allInputs = document.querySelectorAll("input[type='number']");
      allInputs.forEach(input => input.disabled = true);
      document.getElementById("approveBtn").classList.remove("hidden");
    }

    function approveGrades() {
      document.getElementById("printBtn").classList.remove("hidden");
      document.getElementById("approveBtn").classList.add("hidden");
    }
  </script> let loggedInTeacher = null; // will store info about who is logged in
  const credentials = [
  { name: "John", class: "Grade 5", password: "pass" },
  { name: "Mr. Doe", class: "Grade 5A", password: "pass123" }
];

function login() {
  const name = document.getElementById("teacherName").value.trim();
  const className = document.getElementById("teacherClass").value.trim();
  const password = document.getElementById("teacherPassword").value;

  const match = credentials.find(
    c => c.name === name && c.class === className && c.password === password
  );

  if (match) {
    loggedInTeacher = match;
    document.getElementById("login-section").style.display = "none";
    document.getElementById("main-section").style.display = "block";
    document.getElementById("welcome").textContent = `Welcome, ${name} (${className})`;
  } else {
    alert("Invalid login info. Please try again.");
  }
}
</body>
</html>
