<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Teacher Portal</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; background-color: #f0f0f0; }
    h2, h3 { color: #333; }
    label, input, button { display: block; margin: 10px 0; padding: 8px; width: 100%; max-width: 400px; }
    table { width: 100%; max-width: 700px; border-collapse: collapse; margin-top: 20px; }
    th, td { padding: 10px; border: 1px solid #ccc; text-align: left; }
    .logout { margin-top: 30px; }
    #printButton { margin-top: 20px; display: none; }
  </style>
</head>
<body>

  <h2>Welcome, <span id="teacherNameDisplay"></span> - <span id="classDisplay"></span></h2>

  <h3>Enter Grades</h3>
  <form id="gradeForm">
    <label for="studentName">Student Name:</label>
    <input type="text" id="studentName" required />

    <label for="subject">Subject:</label>
    <input type="text" id="subject" required />

    <label for="grade">Grade:</label>
    <input type="text" id="grade" required />

    <button type="button" onclick="addGrade()">Add to Table</button>
  </form>

  <table id="gradeTable">
    <thead>
      <tr>
        <th>Student</th>
        <th>Subject</th>
        <th>Grade</th>
        <th>Status</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>

  <button onclick="submitGrades()">Submit Grades to Principal</button>

  <button id="printButton" onclick="window.print()">Print Approved Grades</button>

  <div class="logout">
    <button onclick="logout()">Log Out</button>
  </div>

<script>
  const urlParams = new URLSearchParams(window.location.search);
  const username = urlParams.get("username");
  const className = urlParams.get("class");

  document.getElementById("teacherNameDisplay").textContent = username;
  document.getElementById("classDisplay").textContent = className;

  function addGrade() {
    const student = document.getElementById("studentName").value.trim();
    const subject = document.getElementById("subject").value.trim();
    const grade = document.getElementById("grade").value.trim();

    if (student && subject && grade) {
      const table = document.getElementById("gradeTable").getElementsByTagName("tbody")[0];
      const row = table.insertRow();
      row.insertCell(0).textContent = student;
      row.insertCell(1).textContent = subject;
      row.insertCell(2).textContent = grade;
      row.insertCell(3).textContent = "Pending";

      // Clear inputs
      document.getElementById("studentName").value = "";
      document.getElementById("subject").value = "";
      document.getElementById("grade").value = "";
    }
  }

  function submitGrades() {
    const rows = document.querySelectorAll("#gradeTable tbody tr");
    if (rows.length === 0) {
      alert("No grades to submit.");
      return;
    }

    // Simulate principal approval for demo
    rows.forEach(row => {
      row.cells[3].textContent = "Approved";
    });

    alert("Grades submitted and approved by principal!");
    document.getElementById("printButton").style.display = "inline-block";
  }

  function logout() {
    window.location.href = "teacher-login.html";
  }
</script>

</body>
</html>
